# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## –ó–∞ 2 –º–∏–Ω—É—Ç—ã

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω

```bash
cd backend
python manage.py runserver
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:8000/api/statistics/
```

–í–æ–π–¥–∏—Ç–µ –ø–æ–¥ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

### 3. –ì–æ—Ç–æ–≤–æ! üéâ

–í—ã —É–≤–∏–¥–∏—Ç–µ:
- üìä –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- üèÜ –¢–û–ü-10 –æ—Ñ—Ñ–µ—Ä–æ–≤
- üë• –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
- üìÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—Ñ—Ñ–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É: `http://localhost:8000/admin/`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–û—Ñ—Ñ–µ—Ä—ã"
3. –ù–∞–∂–º–∏—Ç–µ "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ –æ—Ñ—Ñ–µ—Ä–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API

```bash
# –î–∞—à–±–æ—Ä–¥ –∑–∞ 7 –¥–Ω–µ–π
curl "http://localhost:8000/api/statistics/dashboard/?days=7"

# –¢–û–ü-5 –æ—Ñ—Ñ–µ—Ä–æ–≤
curl "http://localhost:8000/api/statistics/top-offers/?limit=5&days=30"
```

### –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª
curl "http://localhost:8000/api/statistics/dashboard/?days=30" > stats.json
```

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### Python

```python
import requests

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
response = requests.get('http://localhost:8000/api/statistics/dashboard/?days=30')
data = response.json()

# –í—ã–≤–µ—Å—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏
print(f"–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤: {data['data']['total_clicks']}")
print(f"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {data['data']['unique_users']}")
print(f"–ö–æ–Ω–≤–µ—Ä—Å–∏—è: {data['data']['conversion']['conversion_rate']}%")

# –¢–û–ü-3 –æ—Ñ—Ñ–µ—Ä–∞
print("\n–¢–û–ü-3 –æ—Ñ—Ñ–µ—Ä–∞:")
for i, offer in enumerate(data['data']['top_offers'][:3], 1):
    print(f"{i}. {offer['offer__partner_name']}: {offer['total_clicks']} –∫–ª–∏–∫–æ–≤")
```

### JavaScript

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –¢–û–ü –æ—Ñ—Ñ–µ—Ä–æ–≤
async function getTopOffers() {
  const response = await fetch('/api/statistics/top-offers/?limit=5&days=7');
  const data = await response.json();
  
  console.log('–¢–û–ü-5 –æ—Ñ—Ñ–µ—Ä–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é:');
  data.data.forEach((offer, i) => {
    console.log(`${i+1}. ${offer.offer__partner_name}: ${offer.total_clicks} –∫–ª–∏–∫–æ–≤`);
  });
}

getTopOffers();
```

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã

- `?days=7` - –ø–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è
- `?days=30` - –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `?days=90` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞

## –í—Å–µ API endpoints

```bash
# –î–∞—à–±–æ—Ä–¥
GET /api/statistics/dashboard/?days=30

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—Ñ—Ñ–µ—Ä–∞–º
GET /api/statistics/offers/?days=30

# –¢–û–ü –æ—Ñ—Ñ–µ—Ä–æ–≤
GET /api/statistics/top-offers/?limit=10&days=30

# –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ñ—Ñ–µ—Ä–∞
GET /api/statistics/offers/<offer_id>/?days=30

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º
GET /api/statistics/daily/?days=30

# –ö–æ–Ω–≤–µ—Ä—Å–∏—è
GET /api/statistics/conversion/?days=30

# –ü–æ–¥–ø–∏—Å—á–∏–∫–∏
GET /api/statistics/subscribers/
```

## –ú–µ—Ç—Ä–∏–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ

- **total_clicks** - –≤—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤
- **unique_users** - —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **conversion_rate** - –∫–æ–Ω–≤–µ—Ä—Å–∏—è (%)
- **avg_clicks_per_user** - —Å—Ä–µ–¥–Ω–µ–µ –∫–ª–∏–∫–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–æ –æ—Ñ—Ñ–µ—Ä–∞–º

- **total_clicks** - –∫–ª–∏–∫–æ–≤ –ø–æ –æ—Ñ—Ñ–µ—Ä—É
- **unique_users** - —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **avg_clicks_per_user** - —Å—Ä–µ–¥–Ω–µ–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º

- **total** - –≤—Å–µ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- **active** - –∞–∫—Ç–∏–≤–Ω—ã—Ö (–Ω–µ –æ—Ç–ø–∏—Å–∞–ª–∏—Å—å)
- **with_messages** - —Ä–∞–∑—Ä–µ—à–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

### –•–æ—Ä–æ—à–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ ‚úÖ

- –ö–æ–Ω–≤–µ—Ä—Å–∏—è > 300% (avg_clicks_per_user > 3)
- –ú–Ω–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –æ—Ñ—Ñ–µ—Ä–∞–º

### –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è ‚ö†Ô∏è

- –ö–æ–Ω–≤–µ—Ä—Å–∏—è < 100% (avg_clicks_per_user < 1)
- –ú–∞–ª–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–¥–∏–Ω –æ—Ñ—Ñ–µ—Ä –∑–∞–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∫–ª–∏–∫–∏

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `daily_report.py`:

```python
import requests
import json
from datetime import datetime

# –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
response = requests.get('http://localhost:8000/api/statistics/dashboard/?days=1')
data = response.json()

# –°–æ—Ö—Ä–∞–Ω—è–µ–º
filename = f"report_{datetime.now().strftime('%Y-%m-%d')}.json"
with open(filename, 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)

print(f"‚úÖ –û—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {filename}")
print(f"üìä –ö–ª–∏–∫–æ–≤ –∑–∞ –¥–µ–Ω—å: {data['data']['total_clicks']}")
```

–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å:
```bash
python daily_report.py
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–Ω–æ–º–∞–ª–∏–π

```python
import requests

response = requests.get('http://localhost:8000/api/statistics/conversion/?days=7')
data = response.json()

avg = data['data']['avg_clicks_per_user']

if avg < 1.0:
    print("‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!")
elif avg > 10.0:
    print("üéâ –û—Ç–ª–∏—á–Ω–æ: –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!")
else:
    print(f"‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ: {avg:.2f} –∫–ª–∏–∫–æ–≤/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å")
```

## –ü—Ä–æ–±–ª–µ–º—ã?

### –û—à–∏–±–∫–∞ 404

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL: `http://localhost:8000/api/statistics/`

### –û—à–∏–±–∫–∞ 403

- –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –∫–ª–∏–∫–∏ –≤ –ë–î
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –ø–µ—Ä–∏–æ–¥: `?days=90`

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

üìñ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [STATISTICS_GUIDE.md](STATISTICS_GUIDE.md) - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [STATISTICS_API.md](STATISTICS_API.md) - –æ–ø–∏—Å–∞–Ω–∏–µ API
- [STATISTICS_CHANGELOG.md](STATISTICS_CHANGELOG.md) - —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –ë–î –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏! üöÄ

